<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>登录</title>
    <link rel="stylesheet" href="../网页/public.css" />
    <link rel="stylesheet" href="../css/denglu.css" />
</head>

<body>
    <div id="header">
        <div class="margin">
            <div class="img">
                <img src="../images/logo.png" />
                <img src="../images/ls2.png" />
                <p>欢迎登录</p>
            </div>
        </div>
    </div>

    <div id="nav">
        <div class="margin">
            <div class="left">
                <img src="../images/loginBannerImg.png" />
            </div>
            <div class="right">
                <div class="dlu">
                    <p>账号登录</p>
                </div>
                 <div class="san">
                     <span></span>
                 </div>
                <div class="ipt">
                    <div class="img"><img src="../images/user.png" /></div>
                    <input type="text" id="user" placeholder="请输入用户名" />
                </div>
                <div class="ipt">
                    <div class="img"><img src="../images/lock.png" /></div>
                    <input type="text" id="pass" placeholder="请输入密码" />
                </div>

                <div class="sub">
                    <input type="button" value="登录" id="log" />
                    <input type="button" value="登录" id="reg" />
                </div>

                <div class="xinxi">
                    <a class="te" href="#">短信验证码登录</a>
                    <a class="te1" href="#">忘记密码</a>
                </div>

                <div class="zhuce">
                    <ul>
                        <li><img src="../images/weibo.png" /><a href="#">微博</a><span>|</span></li>
                        <li><img src="../images/weixin.png" /><a href="#">微信</a><span>|</span></li>
                        <li><a href="../网页/注册.html">立即注册</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div id="footer">
        <div class="margin">
            <p>Copyright © 2019 &nbsp;&nbsp;中酒网&nbsp;版权所有</p>
        </div>
    </div>

</body>
<script src="../css/cookie.js"></script>
<script>
    // 登录验证
    class Login {
        constructor() {
            this.user = document.getElementById("user");
            this.pass = document.getElementById("pass");
            this.reg = document.getElementById("reg");
            this.log = document.getElementById("log");
            this.span = document.querySelector("span");

            this.addEvent();
        }
        addEvent() {
            var that = this;
            this.log.onclick = function () {
                that.u = that.user.value;
                that.p = that.pass.value;

                that.getMsg();
            }
            this.reg.onclick = function () {
                location.href = "../网页/首页.html";
            }
        }
        getMsg() {
            this.msg = getCookie("userMsg") ? JSON.parse(getCookie("userMsg")) : [];

            var type = 0;
            for (var i = 0; i < this.msg.length; i++) {
                if (this.msg[i].user == this.u && this.msg[i].pass == this.p) {
                    location.href = "../网页/首页.html";
                    // this.span.innerHTML = "登录成功";
                    this.msg[i].onoff = 1;
                    setCookie("userMsg", JSON.stringify(this.msg));
                    type = 1;
                } else if (this.msg[i].user == this.u && this.msg[i].pass != this.p) {
                    this.span.innerHTML = "密码不符合";
                    type = 2;
                }
            }
            if (type == 0) {
                this.span.innerHTML = "用户名不存在,请<a href='../网页/注册.html'>注册</a>";
            }
        }
    }
    new Login();
// 登录验证结束


</script>

</html>